{"version":3,"sources":["AssetTracker.js","App.js","reportWebVitals.js","index.js"],"names":["appClient","Stitch","initializeDefaultAppClient","svcClient","getServiceClient","RemoteMongoClient","factory","dateSorter","a","b","moment","date","coinUnitMap","algo","monetary","unit","fractional","decimalPlaces","band","bch","btc","celo","comp","dash","dot","eth","grt","ksm","ltc","mkr","nu","xlm","xrp","zec","AssetTracker","transactions","quotes","this","sort","earliestDate","latestDate","assets","Set","map","tx","asset","balanceAtDate","filter","reduce","accumulator","plus","BigNumber","amount","interval","balances","Array","from","length","v","i","Date","valueOf","toISOString","slice","Object","fromEntries","close","setHours","balance","quote","coin","fiat","times","open","dividedBy","toNumber","gistId","Promise","resolve","reject","fetch","then","response","json","gist","keys","files","_filename","endsWith","JSON","parse","content","_transactions","_transaction","includes","auth","loginWithCredential","AnonymousCredential","db","collection","find","$and","$in","$gte","$lte","asArray","catch","error","cookies","Cookies","colors","App","useState","to","dateRange","setDateRange","get","currency","setCurrency","window","location","href","match","split","pop","setGistId","undefined","assetTracker","setAssetTracker","useEffect","set","path","fromGist","console","Container","fluid","Navbar","bg","variant","Brand","Nav","className","Form","inline","Control","type","style","width","size","disabled","value","onChange","event","target","_dateRange","placeholder","defaultValue","as","Row","ResponsiveContainer","minHeight","LineChart","data","isBetween","margin","top","right","left","bottom","CartesianGrid","strokeDasharray","XAxis","dataKey","YAxis","yAxisId","Tooltip","Legend","Line","stroke","Table","striped","bordered","hover","colspan","transaction","key","note","marginRight","Intl","NumberFormat","toUpperCase","format","acc","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.805cd19e.chunk.js","sourcesContent":["import BigNumber from \"bignumber.js\";\nimport moment from 'moment';\nimport {\n  Stitch,\n  AnonymousCredential,\n  RemoteMongoClient\n} from 'mongodb-stitch-browser-sdk';\n\nconst appClient = Stitch.initializeDefaultAppClient('grenade-tnats');\nconst svcClient = appClient.getServiceClient(RemoteMongoClient.factory, 'mongodb-atlas-grenade-stitch');\n\nconst dateSorter = (a, b) => (\n    (moment(a.date) < moment(b.date))\n        ? -1\n        : (moment(a.date) > moment(b.date))\n            ? 1\n            : 0\n);\n\nconst coinUnitMap = {\n    algo: {\n        monetary: {\n            unit: 'algo',\n        },\n        fractional: {\n            unit: 'unknown',\n            decimalPlaces: -1,\n        },\n    },\n    band: {\n        monetary: {\n            unit: 'band',\n        },\n        fractional: {\n            unit: 'unknown',\n            decimalPlaces: -1,\n        },\n    },\n    bch: {\n        monetary: {\n            unit: 'bch',\n        },\n        fractional: {\n            unit: 'satoshi',\n            decimalPlaces: 8,\n        },\n    },\n    btc: {\n        monetary: {\n            unit: 'btc',\n        },\n        fractional: {\n            unit: 'satoshi',\n            decimalPlaces: 8,\n        },\n    },\n    celo: {\n        monetary: {\n            unit: 'celo',\n        },\n        fractional: {\n            unit: 'unknown',\n            decimalPlaces: -1,\n        },\n    },\n    comp: {\n        monetary: {\n            unit: 'comp',\n        },\n        fractional: {\n            unit: 'unknown',\n            decimalPlaces: -1,\n        },\n    },\n    dash: {\n        monetary: {\n            unit: 'dash',\n        },\n        fractional: {\n            unit: 'duff',\n            decimalPlaces: 8,\n        },\n    },\n    dot: {\n        monetary: {\n            unit: 'dot',\n        },\n        fractional: {\n            unit: 'planck',\n            decimalPlaces: 10,\n        },\n    },\n    eth: {\n        monetary: {\n            unit: 'eth',\n        },\n        fractional: {\n            unit: 'wei',\n            decimalPlaces: 18,\n        },\n    },\n    grt: {\n        monetary: {\n            unit: 'grt',\n        },\n        fractional: {\n            unit: 'unknown',\n            decimalPlaces: -1,\n        },\n    },\n    ksm: {\n        monetary: {\n            unit: 'ksm',\n        },\n        fractional: {\n            unit: 'planck',\n            decimalPlaces: 12,\n        },\n    },\n    ltc: {\n        monetary: {\n            unit: 'ltc',\n        },\n        fractional: {\n            unit: 'litoshi',\n            decimalPlaces: 8,\n        },\n    },\n    mkr: {\n        monetary: {\n            unit: 'mkr',\n        },\n        fractional: {\n            unit: 'unknown',\n            decimalPlaces: -1,\n        },\n    },\n    nu: {\n        monetary: {\n            unit: 'nu',\n        },\n        fractional: {\n            unit: 'unknown',\n            decimalPlaces: -1,\n        },\n    },\n    xlm: {\n        monetary: {\n            unit: 'xlm',\n        },\n        fractional: {\n            unit: 'stroop',\n            decimalPlaces: 7,\n        },\n    },\n    xrp: {\n        monetary: {\n            unit: 'xrp',\n        },\n        fractional: {\n            unit: 'drop',\n            decimalPlaces: 6,\n        },\n    },\n    zec: {\n        monetary: {\n            unit: 'zec',\n        },\n        fractional: {\n            unit: 'zatoshi',\n            decimalPlaces: 8,\n        },\n    },\n};\n\nexport default class AssetTracker {\n    constructor(transactions, quotes) {\n        this.quotes = quotes;\n        this.transactions = transactions.sort(dateSorter);\n        this.earliestDate = moment(this.transactions[0].date);\n        this.latestDate = moment();\n        this.assets = [...new Set(this.transactions.map(tx => tx.asset))].sort();\n        this.balanceAtDate = (asset, date) => this.transactions\n            .filter(tx => ((tx.asset === asset) && (moment(tx.date) <= date)))\n            .reduce((accumulator, tx) => accumulator.plus(new BigNumber(tx.amount)), new BigNumber(0));\n        const interval = 1000 * 60 * 60 * 24; // one day\n        this.balances = Array.from(\n            { length: (((this.latestDate - this.earliestDate) / interval) + 1) },\n            (v, i) => new Date(this.earliestDate.valueOf() + (interval * i)).toISOString().slice(0, 10)\n        ).map(date => ({\n            ...Object.fromEntries(this.assets.map(asset => {\n                const close = new Date(date);\n                close.setHours(23, 59, 59);\n                const balance = this.balanceAtDate(asset, close);\n                return [\n                    asset,\n                    {\n                        ...Object.fromEntries(quotes.filter(quote => ((quote.coin === asset) && (quote.date === date))).map(quote => [\n                            quote.fiat,\n                            balance.times(BigNumber(quote.open.amount).plus(BigNumber(quote.close.amount)).dividedBy(BigNumber(2))).decimalPlaces(2).toNumber() || BigNumber(0).toNumber()\n                        ])),\n                        [asset]: balance.toNumber(),\n                    }\n                ];\n            })),\n            date,\n        }));\n    }\n\n    static fromGist(gistId) {\n        return new Promise((resolve , reject) => {\n            fetch(`https://api.github.com/gists/${gistId}`)\n                .then((response) => response.json())\n                .then((gist) => {\n                    const transactions = Object.keys(gist.files)\n                        .filter(_filename => _filename.endsWith('.json'))\n                        .map(_filename => JSON.parse(gist.files[_filename].content))\n                        .reduce((accumulator, _transactions) => [...accumulator, ..._transactions])\n                        .filter(_transaction => Object.keys(coinUnitMap).includes(_transaction.asset))\n                        .sort(dateSorter);\n                    const earliestDate = transactions[0].date.slice(0, 10);\n                    const latestDate = moment().toISOString().slice(0, 10);\n                    appClient.auth\n                        .loginWithCredential(new AnonymousCredential())\n                        .then(() => {\n                            svcClient.db('grenade')\n                                .collection('quote')\n                                .find(\n                                    {\n                                        $and: [\n                                            {\n                                                coin: {\n                                                    $in: [...new Set(transactions.map(tx => tx.asset))]\n                                                }\n                                            },\n                                            {\n                                                date: {\n                                                    $gte: earliestDate\n                                                }\n                                            },\n                                            {\n                                                date: {\n                                                    $lte: latestDate\n                                                }\n                                            }\n                                        ]\n                                    }\n                                )\n                                .asArray()\n                                .then(quotes => {\n                                    resolve(new AssetTracker(transactions, quotes));\n                                });\n                        });\n                })\n                .catch((error) => {\n                    reject(error);\n                });          \n        });\n    }\n};","import React, { useState, useEffect } from 'react';\nimport Cookies from 'universal-cookie';\nimport moment from 'moment';\n\n// bootstrap\nimport Col from 'react-bootstrap/Col';\nimport Container from 'react-bootstrap/Container';\nimport Form from 'react-bootstrap/Form';\nimport Nav from 'react-bootstrap/Nav';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Row from 'react-bootstrap/Row';\nimport Table from 'react-bootstrap/Table';\n\n// recharts\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\n\nimport AssetTracker from './AssetTracker';\n\nconst cookies = new Cookies();\nconst colors = {\n  bch: '#8dc351',\n  btc: '#f7931a',\n  dash: '#008ce7',\n  dot: '#e71081',\n  eth: '#444eec',\n  ksm: '#8015ab',\n  ltc: '#345d9d',\n  xlm: '#000000',\n  xrp: '#23292f',\n  zec: '#ecb244',\n};\n\n\nfunction App() {\n  const [dateRange, setDateRange] = useState({ from: moment('2020-11-11').toISOString().slice(0, 10), to: moment().toISOString().slice(0, 10) });\n  const [currency, setCurrency] = useState(cookies.get('currency') || 'eur');\n  const [gistId, setGistId] = useState(window.location.href.match(/#[a-f0-9]{32}$/) ? window.location.href.split('#').pop() : cookies.get('gist'));\n  const [assetTracker, setAssetTracker] = useState(undefined);\n  useEffect(() => {\n    if(!!currency && currency.match(/^[a-z]{3}$/) && cookies.get('currency') !== currency) {\n      cookies.set('currency', currency, { path: '/' });\n    }\n  }, [currency]);\n  useEffect(() => {\n    if(!!gistId && gistId.match(/^[a-f0-9]{32}$/) && cookies.get('gist') !== gistId) {\n      cookies.set('gist', gistId, { path: '/' });\n    }\n  }, [gistId]);\n  useEffect(() => {\n    if (!!gistId && gistId.match(/^[a-f0-9]{32}$/)) {\n      AssetTracker\n        .fromGist(gistId)\n        .then(setAssetTracker)\n        .catch(console.error);\n    }\n  }, [gistId]);\n  return (\n    <Container fluid>\n      <Navbar bg=\"dark\" variant=\"dark\">\n        <Navbar.Brand href=\"#\">don't panic</Navbar.Brand>\n        <Nav className=\"mr-auto\">\n        </Nav>\n        <Form inline>\n          <Form.Control\n            type=\"text\"\n            style={{width: '7em'}}\n            className=\"mr-sm-2\"\n            size=\"sm\"\n            disabled={true}\n            value={dateRange.from}\n            onChange={\n              (event) => {\n                const from = event.target.value;\n                if (from.match(/^20[12][0-9]-[01][0-9]-[0123][0-9]$/)) {\n                  setDateRange(_dateRange => ({\n                    ..._dateRange,\n                    from\n                  }));\n                }\n              }\n            } />\n          <Form.Control\n            type=\"text\"\n            style={{width: '7em'}}\n            className=\"mr-sm-2\"\n            size=\"sm\"\n            disabled={true}\n            value={dateRange.to}\n            onChange={\n              (event) => {\n                const to = event.target.value;\n                if (to.match(/^20[12][0-9]-[01][0-9]-[0123][0-9]$/)) {\n                  setDateRange(_dateRange => ({\n                    ..._dateRange,\n                    to\n                  }));\n                }\n              }\n            } />\n          <Form.Control\n            type=\"text\"\n            placeholder=\"gist id\"\n            style={{width: '19em'}}\n            className=\"mr-sm-2\"\n            size=\"sm\"\n            disabled={true}\n            defaultValue={gistId}\n            onChange={\n              (event) => {\n                const gistId = event.target.value;\n                if (gistId.match(/^[a-f0-9]{32}$/)) {\n                  setGistId(gistId);\n                }\n              }\n            } />\n          <Form.Control\n            as=\"select\"\n            className=\"mr-sm-2\"\n            size=\"sm\"\n            disabled={true}\n            defaultValue={currency}\n            onChange={\n              (event) => {\n                const currency = event.target.value;\n                if (currency.match(/^[a-f]{3}$/)) {\n                  setCurrency(currency);\n                }\n              }\n            }>\n            <option>eur</option>\n            <option>usd</option>\n          </Form.Control>\n        </Form>\n      </Navbar>\n      <Row>\n        {\n          (!!assetTracker && !!assetTracker.balances.length)\n            ? (\n                <ResponsiveContainer width=\"100%\" minHeight=\"400px\">\n                  <LineChart\n                    data={assetTracker.balances.filter(balance => moment(balance.date).isBetween(moment(dateRange.from), moment(dateRange.to)))}\n                    margin={{ top: 50, right: 10, left: 10, bottom: 10 }} >\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"date\" />\n                    <YAxis yAxisId=\"left\" />\n                    <Tooltip />\n                    <Legend />\n                    {\n                      assetTracker.assets.map(asset => (\n                        <Line yAxisId=\"left\" type=\"monotone\" dataKey={`${asset}.${currency}`} stroke={colors[asset] || '#cccccc'} key={asset} />\n                      ))\n                    }\n                  </LineChart>\n                </ResponsiveContainer>\n              )\n            : null\n        }\n      </Row>\n      <Row>\n        <Table striped bordered hover size=\"sm\" variant=\"dark\" style={{margin: '50px 10px 10px 10px'}}>\n          <thead>\n            <tr>\n              <th colspan=\"4\" className=\"text-right\">\n                transaction history\n              </th>\n            </tr>\n            <tr>\n              <th>\n                date\n              </th>\n              <th>\n                note\n              </th>\n              <th>\n                asset\n              </th>\n              <th className=\"text-right\">\n                amount\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {\n              (!!assetTracker && !!assetTracker.transactions.length)\n                ? assetTracker.transactions.filter(transaction => moment(transaction.date).isBetween(moment(dateRange.from), moment(dateRange.to))).map((tx, key) => (\n                    <tr key={key}>\n                      <td>\n                        {tx.date}\n                      </td>\n                      <td>\n                        {tx.note}\n                      </td>\n                      <td>\n                        {tx.asset}\n                      </td>\n                      <td className=\"text-right\">\n                        {tx.amount}\n                      </td>\n                    </tr>\n                  ))\n                : null\n            }\n          </tbody>\n        </Table>\n      </Row>\n      <Row>\n        {\n          (!!assetTracker && !!assetTracker.balances.length)\n            ? (\n                <Table striped bordered hover size=\"sm\" variant=\"dark\" style={{margin: '50px 10px 10px 10px'}}>\n                  <thead>\n                    <tr>\n                      <th colspan={(assetTracker.assets.length + 2)} className=\"text-right\">\n                        balance history\n                      </th>\n                    </tr>\n                    <tr>\n                      <th>date</th>\n                      {\n                        assetTracker.assets.map(asset => (\n                          <th key={asset} className=\"text-right\">\n                            {asset}\n                          </th>\n                        ))\n                      }\n                      <th className=\"text-right\">total</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {\n                      assetTracker.balances.filter(balance => moment(balance.date).isBetween(moment(dateRange.from), moment(dateRange.to))).map((balance) => (\n                        <tr key={balance.date}>\n                          <th>{balance.date}</th>\n                          {\n                            assetTracker.assets.map(asset => (\n                              <td key={`${balance.date}-${asset}`} className=\"text-right\">\n                                <span className=\"text-muted\" style={{marginRight: '1em'}}>\n                                  {balance[asset][asset]}\n                                </span>\n                                {new Intl.NumberFormat('en-GB', { style: 'currency', currency: currency.toUpperCase() }).format(balance[asset][currency])}\n                              </td>\n                            ))\n                          }\n                          <td className=\"text-right\">\n                            {new Intl.NumberFormat('en-GB', { style: 'currency', currency: currency.toUpperCase() }).format(assetTracker.assets.reduce((acc, asset) => acc + balance[asset][currency], 0))}\n                          </td>\n                        </tr>\n                      ))\n                    }\n                  </tbody>\n                </Table>\n              )\n            : null\n        }\n      </Row>\n    </Container>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}